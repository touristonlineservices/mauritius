"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[296,9794,6766],{70296:function(t,n,r){r.d(n,{O:function(){return Serialized}});var l=r(52322),o=r(96577),s=r.n(o),u=r(2784),c=r(25237),d=r.n(c),h=r(99219),f=r(6804),y=r(70366),g=r(45720),b=r(37435),w=r(3792);let useItemPageFetcher=t=>{var n;let{isChildTemplate:r,childTemplateSlug:l}=t,o=(0,u.useContext)(y.u),s=(0,u.useContext)(h.z),c=null==s?void 0:null===(n=s.customization)||void 0===n?void 0:n.item_page_data,d=(0,u.useCallback)(async()=>{if(c&&s&&(null==o?void 0:o.routes)&&l){var t,n;let r=(0,g.wo)(o.routes),u=await (null===(t=(0,b.Z)(null==c?void 0:c.integration))||void 0===t?void 0:t.getDataBySlug(null==o?void 0:o.id,c,l)),d=(0,w.Z)(null==u?void 0:null===(n=u.data)||void 0===n?void 0:n[0],c,s.id,r[s.id],f.Z,s.published_content[0]);s.setPublishedContent([d])}},[c,s,null==o?void 0:o.routes,null==o?void 0:o.id,l]);(0,u.useEffect)(()=>{r&&l&&(null==c?void 0:c.expiresAt)&&new Date().getTime()>new Date(null==c?void 0:c.expiresAt).getTime()-1e4&&d()},[null==c?void 0:c.expiresAt,l,r])};var q=r(60692),S=r(75269),D=class{static async submit(t,n){let r=new S.Z,l=await r.post("/form/submission/".concat(t),n);return l}};let k=d()(()=>Promise.all([r.e(7775),r.e(41),r.e(672),r.e(4060)]).then(r.bind(r,4060)).then(t=>t.CollectionProvider),{loadableGenerated:{webpack:()=>[4060]}}),I=d()(()=>Promise.all([r.e(8070),r.e(5635),r.e(4455),r.e(7671),r.e(5738)]).then(r.bind(r,5738)).then(t=>t.Serializer),{loadableGenerated:{webpack:()=>[5738]}});function Serialized(t){let{isChildTemplate:n,childTemplateSlug:r,children:o}=t,c=(0,u.useContext)(h.z);return useItemPageFetcher({isChildTemplate:n,childTemplateSlug:r}),(0,l.jsx)(I,{node:c.published_content[0],optimizedImageComponent:s(),collectionProviderComponent:k,isImageOptimizable:q.q,handleFormSubmission:D.submit,rootClassName:"typedream content",children:o})}Serialized.defaultProps={childTemplateSlug:void 0}},99219:function(t,n,r){r.d(n,{T:function(){return PageProvider},z:function(){return u}});var l=r(52322),o=r(32957),s=r(2784);let u=(0,s.createContext)(null);function PageProvider(t){let{page:n,children:r}=t,[c,d]=(0,s.useState)(n);(0,s.useEffect)(()=>{n.id===c.id&&((0,o.Z)(n,c)||c.modified)||d(n)},[n]);let h=(0,s.useMemo)(()=>({...c,setPublishedContent:t=>{d({...c,published_content:t,modified:!0})}}),[c]);return(0,l.jsx)(u.Provider,{value:h,children:r})}},70366:function(t,n,r){r.d(n,{M:function(){return SpaceProvider},u:function(){return s}});var l=r(52322),o=r(2784);let s=(0,o.createContext)(null);function SpaceProvider(t){let{space:n,children:r}=t;return(0,l.jsx)(s.Provider,{value:n,children:r})}},82780:function(t,n,r){var l=r(203),o=r(5853);let buildFromTemplate=(t,n,r,s,u)=>{let{collection_connect_data:c,collection_connect_data_keys:d}=u,h={...u};return c&&(null==d||d.forEach(u=>{let{schemaKey:c,blockElementKey:d}=u,f=n[c],y=t[f];if(y)h[d]=String(y);else if(f===o.Si&&l.W_.isElement(h)&&("a"===h.type||"button"===h.type||"container"===h.type||"img"===h.type)){h.page_id=r,h.internal_link=!0;let n="".concat("/".concat(s.join("/")),"/").concat(t[o.OH.SLUG.fieldName]);"img"===h.type?h.href=n:h.url=n}else h[d]=""})),l.W_.isElement(h)&&(h.children=h.children.map(l=>buildFromTemplate(t,n,r,s,l))),h};n.Z=buildFromTemplate},37435:function(t,n,r){r.d(n,{Z:function(){return collection_createApp}});var l,o=r(75269),s=class{static async queryItems(t,n,r){let l=[];t.limit?l.push("limit=".concat(t.limit)):l.push("limit=50"),t.offset?l.push("offset=".concat(t.offset)):l.push("offset=0");let s=new o.Z,u=await s.post("/collectionitem/public/list/".concat(n).concat(l.length>0?"?".concat(l.join("&")):""),r);return u.data}},u=r(64090),c=Object.defineProperty,m=(t,n,r)=>n in t?c(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,a=(t,n,r)=>(m(t,"symbol"!=typeof n?n+"":n,r),r);let _=class _{getCollectionData(){return{id:this.id,space_id:this.space_id,created_at:this.created_at,updated_at:this.updated_at,deleted_at:this.deleted_at,public_permission:this.public_permission,type:this.type,field:this.field}}getFormData(){return{id:this.id,space_id:this.space_id,updated_at:this.updated_at||new Date().toString(),published_at:new Date().toString(),name:this.field.name,webhook:this.field.webhook,schemaVersion:this.field.schemaVersion,schema:this.field.schema,form_type:this.field.form_type}}static isSchemaTypeWithOptions(t){return t&&"text"!==t.type&&"number"!==t.type&&"email"!==t.type}getViewLimit(t){if("form"===this.type){if("email_collection"===this.field.form_type)switch(t){case u.Lb.GROW:case u.Lb.PRO:case u.Lb.LAUNCH:case u.Lb.MINI:return{unlimited:!0,minimumPlan:u.Lb.LAUNCH_15_20};case u.Lb.LAUNCH_15_20:return{limit:1e3,unlimited:!1,minimumPlan:u.Lb.LAUNCH_15_20};case u.Lb.FREE:default:return{limit:1,unlimited:!1,minimumPlan:u.Lb.LAUNCH_15_20}}switch(t){case u.Lb.GROW:case u.Lb.PRO:return{unlimited:!0,minimumPlan:u.Lb.LAUNCH_15_20};case u.Lb.LAUNCH_15_20:return{limit:1e3,unlimited:!1,minimumPlan:u.Lb.LAUNCH_15_20};case u.Lb.FREE:case u.Lb.MINI:case u.Lb.LAUNCH:default:return{limit:1,unlimited:!1,minimumPlan:u.Lb.LAUNCH_15_20}}}return{unlimited:!0,minimumPlan:u.Lb.FREE}}constructor(t){var n,r;if(a(this,"id"),a(this,"deleted_at"),a(this,"updated_at"),a(this,"created_at"),a(this,"space_id"),a(this,"schemaVersion",0),a(this,"public_permission"),a(this,"type"),a(this,"field"),t&&(n=t)&&n.name){this.id=t.id,this.space_id=t.space_id,this.deleted_at=new Date().toString(),this.updated_at=t.updated_at,this.created_at=new Date().toString(),this.type="form",this.public_permission=2,this.field={name:t.name,schemaVersion:this.schemaVersion,webhook:t.webhook,schema:t.schema,form_type:t.form_type};return}if(t&&!(t&&t.name)){if(this.id=t.id,this.space_id=t.space_id,this.created_at=t.created_at,this.updated_at=t.updated_at,this.deleted_at=t.deleted_at,this.type="form",this.public_permission=2,(r=t.field)&&r.name&&r.schema)this.field={...t.field};else throw Error("Invalid form collection field schema");return}this.id="",this.space_id="",this.deleted_at=new Date().toString(),this.updated_at=new Date().toString(),this.created_at=new Date().toString(),this.public_permission=2,this.field={name:"",schemaVersion:this.schemaVersion,webhook:{},schema:{}},this.type="form"}};var d=Object.defineProperty,p=(t,n,r)=>n in t?d(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,i=(t,n,r)=>(p(t,"symbol"!=typeof n?n+"":n,r),r);let h=["title","slug","public","published_at"],f={selection:"Selection",multiselection:"Multi-selection",text:"Text",number:"Number",date:"Date",image:"Image",boolean:"Checkbox",rich_text:"Rich Text",url:"URL",object:"Object",slug:"Text"},y=class{static isCMS(t){return t&&"cms"===t.type}static getDefaultCMSField(){return{name:"Blog",schemaVersion:0,schema:{0:{name:"Image",type:"image",deleted:!1}},preset_schema:{title:{name:"Title",type:"text",deleted:!1},slug:{name:"Slug",type:"text",deleted:!1},metadata:{name:"Metadata",type:"object",deleted:!1},published_at:{name:"Published At",type:"date",deleted:!1},content:{name:"Content",type:"rich_text",deleted:!1},published_content:{name:"Published Content",type:"rich_text",deleted:!1}},schemaOrder:[...h,"0"]}}static isSchemaTypeWithOptions(t){return t&&("selection"===t.type||"multiselection"===t.type)}static isTypeWithOptions(t){return"selection"===t||"multiselection"===t}static getDefaultCMSItems(t){return[{title:"How to sell your digital products",snippet:"Start selling your digital products with a few simple steps.",slug:"how-to-sell-your-digital-products",publishedAt:new Date,image:"https://api.typedream.com/v0/document/public/06acde81-5a0d-4f50-a48d-eaf4fbc08f8b/2UKkJWvDgmZiA2bBDLXX2f0tRE1_philip-jahn-PYkpulrIMG0-unsplash_Medium.jpeg"},{title:"How to start email marketing",snippet:"Email marketing is a great way to reach your customers.",slug:"how-to-start-email-marketing",publishedAt:new Date,image:"https://api.typedream.com/v0/document/public/08ed9f24-125c-4caa-9d3b-c1233537e0c6/2UQ5bkdooaR5OKEmoFxITtRaXnc_orva-studio-YC8qqp50BdA-unsplash_Medium.jpeg"},{title:"Start your creator journey with a freebie",snippet:"One of the best ways to get started is to give away something for free.",slug:"start-your-creator-journey-with-a-freebie",publishedAt:new Date,image:"https://api.typedream.com/v0/document/public/08ed9f24-125c-4caa-9d3b-c1233537e0c6/2UQ5eB7UTWLOzXlXbKSswM6YsDW_nadine-marfurt-BHZPATWnn-o-unsplash_Medium.jpeg"},{title:"Why you should start a blog",snippet:"Blogging is a great way to establish yourself as an expert in your field.",slug:"why-you-should-start-a-blog",publishedAt:new Date,image:"https://api.typedream.com/v0/document/public/08ed9f24-125c-4caa-9d3b-c1233537e0c6/2UQ5jWjzJohlz5LCCmozkTeMJcy_matt-artz-GmT0kql0k40-unsplash_Medium.jpeg"}].map(n=>({collection_id:t,deleted:!1,public:!0,document:{fields:{0:n.image},preset_fields:{title:n.title,slug:n.slug,published_at:n.publishedAt.toString(),metadata:{metatags:{title:n.title,description:n.snippet}}}}}))}static addSchemaField(t,n){for(let r=0;r<100;r+=1)if(!t[r.toString()])return y.isTypeWithOptions(n)?{schema:{...t,[r.toString()]:{name:f[n],type:n,options:{0:{name:"Option 1",deleted:!1},1:{name:"Option 2",deleted:!1}},deleted:!1}},addedKey:r.toString()}:{schema:{...t,[r.toString()]:{name:f[n],type:n,deleted:!1}},addedKey:r.toString()};throw Error("Cannot add more than 100 fields")}constructor(t){var n;if(i(this,"id"),i(this,"deleted_at"),i(this,"updated_at"),i(this,"created_at"),i(this,"space_id"),i(this,"schemaVersion",0),i(this,"public_permission"),i(this,"type"),i(this,"field"),t&&y.isCMS(t)){this.id=t.id,this.space_id=t.space_id,this.deleted_at=new Date().toString(),this.updated_at=t.updated_at,this.created_at=new Date().toString(),this.type="cms",this.public_permission=3,this.field={name:t.field.name,schemaVersion:this.schemaVersion,schema:t.field.schema,preset_schema:t.field.preset_schema,schemaOrder:t.field.schemaOrder},(null==(n=this.field.schemaOrder)?void 0:n.length)<=0&&(this.field.schemaOrder=[...h,...Object.keys(this.field.schema)]);return}this.id="",this.space_id="",this.deleted_at=new Date().toString(),this.updated_at=new Date().toString(),this.created_at=new Date().toString(),this.public_permission=3,this.field=y.getDefaultCMSField(),this.type="cms"}};i(y,"possiblePresetSchemaKeys",["title","slug","metadata","published_at","content","published_content"]),i(y,"nonSchemaKeys",["public"]);let e=t=>t.toLocaleDateString("en-us",{year:"numeric",month:"short",day:"numeric"}),g={getItemPageDataID:t=>{let n=null==t?void 0:t.integration,r=null==t?void 0:t.tableID;return"".concat(n,"_").concat(r)},constructGetDataResult:t=>{if("form"===t.collection.type){var n;let r=new _(t.collection),{schema:l}=r.field,o=null===(n=t.results)||void 0===n?void 0:n.map(t=>{if(!t.deleted&&t.public){let n=Object.entries(t.document).reduce((t,n)=>{let[r,o]=n,s=parseInt(r,10),u=l[s],c=_.isSchemaTypeWithOptions(u),d=o;return c&&(d=o.map(t=>{var n;return null===(n=u.options[t])||void 0===n?void 0:n.name})),{...t,[s]:d}},{});return{...n,created_at:t.created_at,id:t.id}}}).filter(t=>void 0!==t),s={data:o,has_more:!!t.hasMore,next_cursor:"".concat(t.nextOffset),expires_at:null};return s}if("cms"===t.collection.type){let n=new y(t.collection),{schema:r,preset_schema:l}=n.field,o=t.results,s=null==o?void 0:o.map(t=>{if(!t.deleted&&t.public){let{fields:n}=t.document,o=Object.entries(n).reduce((t,n)=>{let[l,o]=n,s=r[l],u=y.isSchemaTypeWithOptions(s),c=o;return u&&(c=o.map(t=>{var n;return null===(n=s.options[t])||void 0===n?void 0:n.name})),"date"===s.type&&(c=e(new Date(o))),{...t,[l]:c}},{}),s=Object.entries(t.document.preset_fields).reduce((t,n)=>{let[r,o]=n,s=l[r],u=o;return"date"===s.type&&(u=e(new Date(o))),{...t,[r]:u}},{});return{...o,...s,created_at:t.created_at,id:t.id}}}).filter(t=>void 0!==t),u={data:s,has_more:!!t.hasMore,next_cursor:"".concat(t.nextOffset),expires_at:null};return u}return{data:[],has_more:!1,next_cursor:"",expires_at:null}},getData:async(t,n,r,l)=>{var o,c;let d;let h=null==n?void 0:n.tableID;if(!h)throw Error("Invalid collection id ".concat(h));let f=null==n?void 0:null===(o=n.metadata)||void 0===o?void 0:o[u.td.MAX_ITEMS],y=r?parseInt(r,10):0,b=null==n?void 0:null===(c=n.metadata)||void 0===c?void 0:c[u.td.VISITOR_FILTER_COLUMN];b&&l&&(d={path:[b],value:l});let w=await s.queryItems({limit:f,offset:y},h,d);return g.constructGetDataResult(w)},getDataBySlug:async(t,n,r)=>{let l=null==n?void 0:n.tableID;if(!l)throw Error("Invalid collection id ".concat(l));let o=await s.queryItems({limit:1,offset:0},l,{path:["preset_fields","slug"],value:r});return g.constructGetDataResult(o)},getColumnSelectOptions:()=>{throw Error("Not Implemented")},tableConnected:()=>{throw Error("Not Implemented")},getColumnNames:()=>{throw Error("Not Implemented")},getDataWithSearchQueryAndFilter:()=>{throw Error("Not Implemented")},getDataOnBuild:()=>!0};var b=r(89794),w=r(67067),q=r(9669),S=r.n(q),D=r(31691),k=r(5853),I=class{static getDataQuery(t,n,r,l,o,s){return{path:"/app/proxy_public/".concat(t,"/notion"),data:{url:"https://api.notion.com/v1/databases/".concat(n,"/query"),method:"POST",header:{"Content-Type":"application/json","Notion-Version":"2021-08-16"},body:{filter:r,sorts:l,start_cursor:o,page_size:s||void 0}},app:"notion"}}static async callQuery(t,n){let r=new o.Z,l=await r.post(t,n);return l}static async getTable(t,n){let r=new o.Z,l=await r.post("/app/proxy_public/".concat(t,"/notion"),{url:"https://api.notion.com/v1/databases/".concat(n),method:"GET",header:{"Content-Type":"application/json","Notion-Version":"2021-08-16"}});return l}};(l||(l={})).TABLE_ID="tableID";let L={title:{key:"contains",type:"string"},text:{key:"contains",type:"string"},rich_text:{key:"contains",type:"string"},number:{key:"equals",type:"number"},checkbox:{key:"equals",type:"boolean"},select:{key:"equals",type:"string"},multi_select:{key:"contains",type:"string"},date:{key:"equals",type:"true"},url:{key:"contains",type:"string"},email:{key:"contains",type:"string"},phone:{key:"contains",type:"string"},phone_number:{key:"contains",type:"string"},created_time:{key:"equals",type:"true"},last_edited_time:{key:"equals",type:"true"}},T={title:{equals:"string",does_not_equal:"string",contains:"string",does_not_contain:"string",starts_with:"string",ends_with:"string",is_empty:"true",is_not_empty:"true"},text:{equals:"string",does_not_equal:"string",contains:"string",does_not_contain:"string",starts_with:"string",ends_with:"string",is_empty:"true",is_not_empty:"true"},rich_text:{equals:"string",does_not_equal:"string",contains:"string",does_not_contain:"string",starts_with:"string",ends_with:"string",is_empty:"true",is_not_empty:"true"},number:{equals:"number",does_not_equal:"number",greater_than:"number",less_than:"number",greater_than_or_equal_to:"number",less_than_or_equal_to:"number",is_empty:"true",is_not_empty:"true"},checkbox:{equals:"boolean",does_not_equal:"boolean"},select:{equals:"string",does_not_equal:"string",is_empty:"true",is_not_empty:"true"},multi_select:{contains:"string",does_not_contain:"string",is_empty:"true",is_not_empty:"true"},date:{equals:"string",before:"string",after:"string",on_or_before:"string",on_or_after:"string",is_empty:"true",is_not_empty:"true"},files:{is_empty:"true",is_not_empty:"true"},url:{equals:"string",does_not_equal:"string",contains:"string",does_not_contain:"string",starts_with:"string",ends_with:"string",is_empty:"true",is_not_empty:"true"},email:{equals:"string",does_not_equal:"string",contains:"string",does_not_contain:"string",starts_with:"string",ends_with:"string",is_empty:"true",is_not_empty:"true"},phone:{equals:"string",does_not_equal:"string",contains:"string",does_not_contain:"string",starts_with:"string",ends_with:"string",is_empty:"true",is_not_empty:"true"},phone_number:{equals:"string",does_not_equal:"string",contains:"string",does_not_contain:"string",starts_with:"string",ends_with:"string",is_empty:"true",is_not_empty:"true"},created_time:{equals:"string",before:"string",after:"string",on_or_before:"string",on_or_after:"string",is_empty:"true",is_not_empty:"true"},last_edited_time:{equals:"string",before:"string",after:"string",on_or_before:"string",on_or_after:"string",is_empty:"true",is_not_empty:"true"}},displayFormattedDate=t=>{try{let n=new Date(Date.parse(t)),r=n.toISOString().split("Z")[0],[l,o]=r.split("T"),s=o.split(":").slice(0,2).join(":");return"".concat(l).concat("00:00"!==s?" ".concat(s):"")}catch(n){return t}},getPropertyValue=t=>{var n,r,l,o,s,u,c,d,h,f,y,g,b,w,q,S,D,k,I,L;let T=t.type,P=null,j=null;switch(T){case"title":case"rich_text":j=null==t?void 0:null===(r=t[T])||void 0===r?void 0:null===(n=r.map(t=>t.plain_text))||void 0===n?void 0:n.join("");break;case"string":case"checkbox":case"url":case"email":case"phone_number":case"number":j=null==t?void 0:t[T];break;case"multi_select":j=null==t?void 0:null===(l=t[T])||void 0===l?void 0:l.map(t=>t.name).join(", ");break;case"date":j=displayFormattedDate(null==t?void 0:null===(o=t[T])||void 0===o?void 0:o.start),(null==t?void 0:null===(s=t[T])||void 0===s?void 0:s.end)&&(j="".concat(j," - ").concat(displayFormattedDate(null==t?void 0:null===(u=t[T])||void 0===u?void 0:u.end)));break;case"people":j=null==t?void 0:null===(c=t[T])||void 0===c?void 0:c.map(t=>t.name).join(", ");break;case"files":(null==t?void 0:null===(h=t[T])||void 0===h?void 0:null===(d=h[0])||void 0===d?void 0:d.type)==="file"?(j=null==t?void 0:null===(g=t[T])||void 0===g?void 0:null===(y=g[0])||void 0===y?void 0:null===(f=y.file)||void 0===f?void 0:f.url,P=null==t?void 0:null===(q=t[T])||void 0===q?void 0:null===(w=q[0])||void 0===w?void 0:null===(b=w.file)||void 0===b?void 0:b.expiry_time):j=null==t?void 0:null===(k=t[T])||void 0===k?void 0:null===(D=k[0])||void 0===D?void 0:null===(S=D.external)||void 0===S?void 0:S.url;break;case"formula":return getPropertyValue(null==t?void 0:t[T]);case"created_time":case"last_edited_time":j=displayFormattedDate(null==t?void 0:t[T]);break;case"select":case"created_by":case"last_edited_by":j=null==t?void 0:null===(I=t[T])||void 0===I?void 0:I.name;break;case"rollup":{let n=null==t?void 0:t[T].type;if("array"===n){let r=null==t?void 0:null===(L=t[T][n])||void 0===L?void 0:L.map(t=>{let{propValue:n,expiresAt:r}=getPropertyValue(t);return(!P||r&&new Date(r).getTime()<new Date(P).getTime())&&(P=r),n});j=r.join(",")||"";break}j=getPropertyValue(null==t?void 0:t[T]),(null==t?void 0:t[T].function.includes("percent"))&&(j="".concat(Math.round(1e3*Number(j.propValue))/10,"%"));break}default:j=""}return{propValue:j,expiresAt:P}},formatDate=t=>{let n=new Date(Date.parse("".concat(t," GMT+0000"))),r=n.toISOString().split("Z")[0],[l,o]=r.split("T"),s=o.split(":").slice(0,2).join(":");return"".concat(l).concat("00:00"!==s?" ".concat(s):"")};function formatFilterQuery(t,n){if(void 0===n)return n;switch(t){case"string":return"".concat(n);case"number":if(!n||Number.isNaN(n)||Number.isNaN(parseFloat(String(n)))||Number.isNaN(Number(n)))return;return parseFloat(String(n));case"date":if(!(0,D.Z)(n))return;return formatDate(String(n));case"boolean":if("string"!=typeof n)return n;if((null==n?void 0:n.toLowerCase())!=="true"&&(null==n?void 0:n.toLowerCase())!=="false")return;return(null==n?void 0:n.toLowerCase())==="true";case"true":if("string"!=typeof n)return n;if((null==n?void 0:n.toLowerCase())!=="true")return;return(null==n?void 0:n.toLowerCase())==="true";default:return n}}let P={getColumnNames:async(t,n)=>{var r;let o=null==n?void 0:n[l.TABLE_ID],s=await I.getTable(t,o),u=null==s?void 0:null===(r=s.data)||void 0===r?void 0:r.properties;if(!u)return{};let c={};return Object.keys(u).forEach(t=>{c[t]={id:u[t].id,type:u[t].type,name:t}}),c},getColumnSelectOptions:async(t,n,r)=>{var o,s;let u=null==r?void 0:r[l.TABLE_ID],c=await I.getTable(t,u),d=null==c?void 0:null===(s=c.data)||void 0===s?void 0:null===(o=s.properties)||void 0===o?void 0:o[n];return d?d[d.type].options.map(t=>t.name):[]},getDataQuery:(t,n,r,o)=>{var s,u;let c=null==n?void 0:n[l.TABLE_ID],d=null==n?void 0:n.metadata,h=(null==d?void 0:d.filter_column)?{property:d.filter_column,[d.filter_column_type]:{[d.filter_condition]:formatFilterQuery(null===(s=T[d.filter_column_type])||void 0===s?void 0:s[d.filter_condition],d.filter_value)}}:void 0,f=(null==d?void 0:d.visitor_filter_column)&&o&&o!==b.k?{property:d.visitor_filter_column,[d.visitor_filter_column_type]:{["select"===d.visitor_filter_column_type?"equals":"contains"]:formatFilterQuery(null===(u=T[d.visitor_filter_column_type])||void 0===u?void 0:u["select"===d.visitor_filter_column_type?"equals":"contains"],o)}}:void 0,y=(null==d?void 0:d.sort_column)?[{property:d.sort_column,direction:d.sort_direction}]:void 0,g=I.getDataQuery(t,c,h&&f?{and:[h,f]}:h||f,y,r,null==d?void 0:d.max_items);return g},constructGetDataResult:t=>{let n=null==t?void 0:t.results;if(!n)return{data:[],has_more:null==t?void 0:t.has_more,next_cursor:null==t?void 0:t.next_cursor,expires_at:null};let r=null,l=[];return n.forEach(t=>{if(null==t?void 0:t.properties){let n={},o=null==t?void 0:t.properties;Object.entries(o).forEach(t=>{let[l,o]=t,{propValue:s,expiresAt:u}=getPropertyValue(o);u&&(r=r&&new Date(r).getTime()<new Date(u).getTime()?r:u),s&&(n[l]=s)}),n[k.it]=null==t?void 0:t.id,l.push(n)}}),{data:l,has_more:null==t?void 0:t.has_more,next_cursor:null==t?void 0:t.next_cursor,expires_at:r}},getData:async(t,n,r,l)=>{let o=P.getDataQuery(t,n,r,l),s=await I.callQuery(o.path,o.data);return P.constructGetDataResult(null==s?void 0:s.data)},getDataBySlug:async(t,n,r)=>{var o,s,u;let c=null==n?void 0:n[l.TABLE_ID],d={property:k.OH.SLUG.fieldName,[k.OH.SLUG.type]:{equals:r}},h=I.getDataQuery(t,c,d,void 0,void 0,1),f=await I.callQuery(h.path,h.data),y=P.constructGetDataResult(null==f?void 0:f.data);if((null==y?void 0:null===(o=y.data)||void 0===o?void 0:o.length)<=0)throw Error("item page not found");let g=null==y?void 0:null===(s=y.data)||void 0===s?void 0:s[0],b=await P.JSONFileToContent(g,n),q=null==n?void 0:null===(u=n.pageSchema)||void 0===u?void 0:u.metadata;return b=(0,w.Uy)(b,t=>{t[q]=t[q]?JSON.parse(t[q]):t[q]}),y=(0,w.Uy)(y,t=>{t.data[0]=b})},getDataWithSearchQueryAndFilter:async(t,n,r,o,s,u)=>{var c,d;let h=null==n?void 0:n[l.TABLE_ID],f=null==n?void 0:n.metadata,y=(null==f?void 0:f.filter_column)?{property:f.filter_column,[f.filter_column_type]:{[f.filter_condition]:formatFilterQuery(null===(c=T[f.filter_column_type])||void 0===c?void 0:c[f.filter_condition],f.filter_value)}}:void 0,g=(null==f?void 0:f.visitor_filter_column)&&u&&u!==b.k?{property:f.visitor_filter_column,[f.visitor_filter_column_type]:{["select"===f.visitor_filter_column_type?"equals":"contains"]:formatFilterQuery(null===(d=T[f.visitor_filter_column_type])||void 0===d?void 0:d["select"===f.visitor_filter_column_type?"equals":"contains"],u)}}:void 0,w=y&&g?{and:[y,g]}:y||g,q=null==f?void 0:f.search_columns;q=Array.isArray(q)&&(null==q?void 0:q.length)>0?q:Object.keys(o);let S=[];r&&q.forEach(t=>{let n=o[t];if(L[n.type]){let{key:t,type:l}=L[n.type],o=formatFilterQuery(l,r);if(null!=o&&""!==o){if("string"===l){S=S.concat([{property:n.name,[n.type]:{[t]:o}},{property:n.name,[n.type]:{[t]:o.toLowerCase()}},{property:n.name,[n.type]:{[t]:o.toUpperCase()}},{property:n.name,[n.type]:{[t]:o.charAt(0).toUpperCase()+o.slice(1)}},{property:n.name,[n.type]:{[t]:function(t){let n=t.split(" ");return n.map(t=>t[0].toUpperCase()+t.substring(1)).join(" ")}(o)}}]);return}S.push({property:n.name,[n.type]:{[t]:o}})}}});let D=w;(null==S?void 0:S.length)>0&&w&&(D={and:[w,{or:S}]}),(null==S?void 0:S.length)>0&&!w&&(D={or:S});let k=(null==f?void 0:f.sort_column)?[{property:null==f?void 0:f.sort_column,direction:null==f?void 0:f.sort_direction}]:void 0,j=I.getDataQuery(t,h,D,k,s,null==f?void 0:f.max_items),N=await I.callQuery(j.path,j.data);return P.constructGetDataResult(null==N?void 0:N.data)},getItemPageDataID:t=>{let n=null==t?void 0:t.integration,r=null==t?void 0:t[l.TABLE_ID];return"".concat(n,"_").concat(r)},tableConnected:t=>t&&(null==t?void 0:t[l.TABLE_ID]),JSONFileToContent:async(t,n)=>{var r,l;let o=t,s=null==n?void 0:null===(r=n.pageSchema)||void 0===r?void 0:r.content;if(t&&t[s]){let n=t[s],r=await S().get(n,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}),l=(null==r?void 0:r.data)?JSON.parse(null==r?void 0:r.data):null;o=(0,w.Uy)(t,t=>{t[s]=l})}let u=null==n?void 0:null===(l=n.pageSchema)||void 0===l?void 0:l.published_content;if(t&&t[u]){let n=t[u],r=await S().get(n,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}),l=(null==r?void 0:r.data)?JSON.parse(null==r?void 0:r.data):null;o=(0,w.Uy)(t,t=>{t[u]=l})}return o},getDataOnBuild:()=>!1};var collection_createApp=t=>{switch(t){case"notion":return P;case"td_cms":return g;default:throw Error("Unknown integration ".concat(t))}}},3792:function(t,n,r){var l=r(203),o=r(82780);let updateCollectionItemRichTextContent=(t,n,r,o)=>{let s={...r};if(l.W_.isElement(s)){if("rich_text_content"===s.type){let r=o?n.content:n.published_content,l=t[r];try{var u;let t=null==l?void 0:null===(u=l[0])||void 0===u?void 0:u.children;t&&(s.children=t)}catch(t){}}else s.children=s.children.map(r=>updateCollectionItemRichTextContent(t,n,r))}return s};n.Z=(t,n,r,l,s,u,c)=>{let d={...u,id:u.id||s()};return t&&n.contentSchema&&(d=(0,o.Z)(t,n.contentSchema,r,l,u),d=updateCollectionItemRichTextContent(t,n.pageSchema,d,c)),d}},45720:function(t,n,r){r.d(n,{wo:function(){return o}}),r(37435);var l=r(77068);let o=(0,l.Z)(function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={};return(null==t?void 0:t.page_id)&&(r[t.page_id]=n,(null==t?void 0:t.children_template_page_id)&&(r[t.children_template_page_id]=n),t.children&&Object.keys(t.children).forEach(l=>{Object.assign(r,o(t.children[l],[...n,l]))})),r})},30648:function(t,n,r){var l,o;r.d(n,{P:function(){return l}}),(o=l||(l={})).PILL="pill",o.PILL_BG="pillWithBackground",o.TAB="tab",o.SQUARE_BG="squareWithBackground",o.LEFT_COLUMN="leftColumn"},89794:function(t,n,r){r.d(n,{L:function(){return E},k:function(){return K}});var l={};r.r(l),r.d(l,{filterContainer_leftColumn:function(){return g},filterContainer_pill:function(){return b},filterContainer_pillWithBackground:function(){return w},filterContainer_squareWithBackground:function(){return q},filterContainer_tab:function(){return S},filterItemActive_leftColumn:function(){return D},filterItemActive_pill:function(){return k},filterItemActive_pillWithBackground:function(){return I},filterItemActive_squareWithBackground:function(){return L},filterItemActive_tab:function(){return T},filterItemWrapper_leftColumn:function(){return P},filterItemWrapper_pill:function(){return j},filterItemWrapper_pillWithBackground:function(){return N},filterItemWrapper_squareWithBackground:function(){return O},filterItemWrapper_tab:function(){return A},filterItem_leftColumn:function(){return W},filterItem_pill:function(){return B},filterItem_pillWithBackground:function(){return F},filterItem_squareWithBackground:function(){return U},filterItem_tab:function(){return M},filterNavNext:function(){return R},filterNavPrev:function(){return Q},filterWrapper_leftColumn:function(){return V},filterWrapper_pill:function(){return G},filterWrapper_pillWithBackground:function(){return z},filterWrapper_squareWithBackground:function(){return Z},filterWrapper_tab:function(){return H}});var o=r(24228),s=r(93765),u=r(45563),c=r(89363),d=r(72779),h=r.n(d),f=r(2784),y=r(30648),g="vvqwo72",b="vvqwo73 vvqwo70",w="vvqwo74 vvqwo71 vvqwo70",q="vvqwo75 vvqwo71 vvqwo70",S="vvqwo76 vvqwo70",D="vvqwo7d",k="vvqwo79 vvqwo78",I="vvqwo7a vvqwo78",L="vvqwo7b vvqwo78",T="vvqwo7c",P="vvqwo7o",j="vvqwo7k vvqwo7j",N="vvqwo7l vvqwo7j",O="vvqwo7m vvqwo7j",A="vvqwo7n vvqwo7j",W="vvqwo7i",B="vvqwo7f vvqwo77",F="vvqwo7g vvqwo77",U="vvqwo7h vvqwo77",M="vvqwo7e vvqwo77",R="vvqwo7w vvqwo7v",Q="vvqwo7x vvqwo7v",V="vvqwo7p",G="vvqwo7r vvqwo7q",z="vvqwo7s vvqwo7q",Z="vvqwo7t vvqwo7q",H="vvqwo7u vvqwo7q",J=r(52322);let K="All";function E(t){let{filters:n,filterStyle:r=y.P.PILL,filterColor:d,selectedFilter:g,setSelectedFilter:b}=t,w=(0,f.useRef)(null),[q,S]=(0,f.useState)(0),[D,k]=(0,f.useState)(!1),I=w.current&&r!==y.P.LEFT_COLUMN&&w.current.scrollWidth>w.current.offsetWidth,v=t=>t?r===y.P.TAB?"white"===d||"gray"===d?"var(--text)":"var(--accent)":"gray"===d?"var(--text)":"white"===d?"var(--text-light-theme)":"var(--text-on-accent)":"var(--text-lighter)",C=t=>t&&r===y.P.TAB?"white"===d||"gray"===d?"var(--text-light)":"var(--accent)":"transparent";(0,f.useEffect)(()=>{w.current&&I&&(q>=w.current.scrollWidth-w.current.offsetWidth-1?k(!0):k(!1))},[q,I]);let x=t=>{w.current&&(w.current.scrollLeft+=t,S(q+t))};return(0,J.jsxs)("div",{className:h()(l["filterWrapper_".concat(r)]),style:{"--accent":(0,u.Tj)(d,c.z7)},children:[(0,J.jsx)("div",{className:l["filterContainer_".concat(r)],children:(0,J.jsxs)("div",{className:l["filterItemWrapper_".concat(r)],ref:w,onScroll:I?()=>{w.current&&S(w.current.scrollLeft)}:()=>{},children:[(0,J.jsx)("button",{type:"button",onClick:()=>b(K),className:h()(l["filterItem_".concat(r)],{[l["filterItemActive_".concat(r)]]:g===K}),style:{color:v(g===K),borderColor:C(g===K),boxShadow:g===K&&r!==y.P.TAB?"0 10px 20px -10px ".concat((0,u.Tj)(d,c.My)):"none"},children:K}),n.map(t=>(0,J.jsx)("button",{type:"button",onClick:()=>b(t),className:h()(l["filterItem_".concat(r)],{[l["filterItemActive_".concat(r)]]:g===t}),style:{color:v(g===t),borderColor:C(g===t),boxShadow:g===t&&r!==y.P.TAB?"0 10px 20px -10px ".concat((0,u.Tj)(d,c.My)):"none"},children:t},t))]})}),I&&0!==q&&(0,J.jsx)("div",{className:Q,children:(0,J.jsx)("button",{type:"button",onClick:()=>x(-300),children:(0,J.jsx)(o.s,{size:28})})}),I&&!D&&(0,J.jsx)("div",{className:R,children:(0,J.jsx)("button",{type:"button",onClick:()=>x(300),children:(0,J.jsx)(s._,{size:28})})})]})}E.defaultProps={selectedFilter:K,filterStyle:y.P.PILL,filterColor:"accent"}}}]);